<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ThÃ¡i áº¤t Â· Ká»³ MÃ´n â€” Cáº¥u TrÃºc ToÃ¡n Há»c</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• Header â•â•â•â•â•â•â•â•â•â•â•â• -->
<header class="site-header">
    <h1>ThÃ¡i áº¤t Â· Ká»³ MÃ´n â€” Cáº¥u TrÃºc ToÃ¡n Há»c</h1>
    <p class="subtitle">
        Trá»±c quan hoÃ¡ cÃ¡c cáº¥u trÃºc Ä‘áº¡i sá»‘ (nhÃ³m cyclic, sá»‘ há»c module, Ã¡nh xáº¡ toÃ n Ã¡nh)
        áº©n bÃªn trong hai há»‡ thá»‘ng ThÃ¡i áº¤t Tháº§n Sá»‘ vÃ  Ká»³ MÃ´n Äá»™n GiÃ¡p
    </p>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• Navigation â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav class="nav-bar">
    <a href="#sec-hado">æ²³ HÃ  Äá»“</a>
    <a href="#sec-lacthu">â‘  Láº¡c ThÆ°</a>
    <a href="#sec-cyclic">â‘¡ NhÃ³m Cyclic</a>
    <a href="#sec-phicung">â‘¢ Phi Cung â„¤â‚‰</a>
    <a href="#sec-modular">â‘£ Module Lá»“ng</a>
    <a href="#sec-tamco">â‘¤ Tam CÆ¡</a>
    <a href="#sec-kimon">â‘¥ Ká»³ MÃ´n 3 Lá»›p</a>
    <a href="#sec-constants">â‘¦ Háº±ng Sá»‘</a>
</nav>

<main>

    <!-- â•â•â• Â§ 0: HÃ  Äá»“ â•â•â• -->
    <section id="sec-hado" class="viz-section">
        <h2><span class="sec-num">æ²³</span> HÃ  Äá»“ â€” ThiÃªn Sinh Äá»‹a ThÃ nh</h2>
        <p class="sec-desc">
            HÃ  Äá»“ lÃ  sÆ¡ Ä‘á»“ báº£n thá»ƒ vÅ© trá»¥: 5 cáº·p Sinhâ€“ThÃ nh (1â€“10), 4 phÆ°Æ¡ng + Trung tÃ¢m.
            ThiÃªn (láº») Sinh, Äá»‹a (cháºµn) ThÃ nh. Tá»•ng = 55 (ThiÃªn 25 + Äá»‹a 30).
            Ná»n táº£ng TiÃªn ThiÃªn BÃ¡t QuÃ¡i vá»›i 4 trá»¥c: Tung, HoÃ nh, Táº£, Há»¯u.
        </p>
        <div id="viz-hado"></div>
    </section>

    <!-- â•â•â• Â§ 1: Láº¡c ThÆ° Magic Square â•â•â• -->
    <section id="sec-lacthu" class="viz-section">
        <h2><span class="sec-num">â‘ </span> Láº¡c ThÆ° â€” Ma PhÆ°Æ¡ng 3 Ã— 3</h2>
        <p class="sec-desc">
            Láº¡c ThÆ° lÃ  ma tráº­n 3 Ã— 3 vá»›i má»i hÃ ng, cá»™t, Ä‘Æ°á»ng chÃ©o Ä‘á»u = 15.
            TÃ­nh cháº¥t Ä‘á»‘i xá»©ng: p + (10 âˆ’ p) = 10. Ná»n táº£ng Cá»­u Cung cho cáº£ ThÃ¡i áº¤t vÃ  Ká»³ MÃ´n.
        </p>

        <!-- Mode toggle: Äáº¡i Viá»‡t â†” Trung Quá»‘c -->
        <div class="lt-toggle-bar">
            <button id="btn-lt-tq" class="lt-toggle-btn active" onclick="setLacThuMode('TQ')">
                ğŸ‡¨ğŸ‡³ Trung Quá»‘c
            </button>
            <button id="btn-lt-dv" class="lt-toggle-btn" onclick="setLacThuMode('DV')">
                ğŸ‡»ğŸ‡³ Äáº¡i Viá»‡t
            </button>
            <span id="lt-mode-hint" class="lt-mode-hint">Nam trÃªn â€” Báº¯c dÆ°á»›i</span>
        </div>

        <div id="viz-lacthu"></div>
    </section>

    <!-- â•â•â• Â§ 2: Cyclic Group Zoo â•â•â• -->
    <section id="sec-cyclic" class="viz-section">
        <h2><span class="sec-num">â‘¡</span> Bá»™ SÆ°u Táº­p NhÃ³m Cyclic</h2>
        <p class="sec-desc">
            NÄƒm nhÃ³m cyclic â„¤â‚‰, â„¤â‚ˆ, â„¤â‚â‚‚, â„¤â‚â‚†, â„¤â‚†â‚€ xuáº¥t hiá»‡n tá»± nhiÃªn trong tÃ­nh toÃ¡n.
            Má»—i nhÃ³m lÃ  vÃ²ng Ä‘Ã³ng â€” phÃ©p quay modulo trá»Ÿ vá» Ä‘iá»ƒm xuáº¥t phÃ¡t.
        </p>
        <div id="viz-cyclic"></div>
    </section>

    <!-- â•â•â• Â§ 3: Phi Cung Animation â•â•â• -->
    <section id="sec-phicung" class="viz-section">
        <h2><span class="sec-num">â‘¢</span> Phi Cung â€” PhÃ©p Quay â„¤â‚‰</h2>
        <p class="sec-desc">
            Phi Cung lÃ  phÃ©p quay trÃªn â„¤â‚‰ theo cÃ´ng thá»©c ((sâˆ’1) Â± n) mod 9 + 1.
            ÄÃ¢y lÃ  cÆ¡ cháº¿ trung tÃ¢m quyáº¿t Ä‘á»‹nh ngÃ´i sao, cung, mÃ´n náº±m á»Ÿ Ä‘Ã¢u.
        </p>
        <div id="viz-phicung"></div>
    </section>

    <!-- â•â•â• Â§ 4: Nested Modular Chain â•â•â• -->
    <section id="sec-modular" class="viz-section">
        <h2><span class="sec-num">â‘£</span> Chuá»—i Module Lá»“ng â€” TÃ­ch NiÃªn Decomposition</h2>
        <p class="sec-desc">
            Tá»« TÃ­ch NiÃªn (nÄƒm tÃ­nh tá»« Epoch), rÃºt gá»n qua 3 táº§ng modulo:
            â„¤â‚ƒâ‚†â‚€â‚€ â†’ â„¤â‚ƒâ‚†â‚€ â†’ â„¤â‚‡â‚‚. Káº¿t quáº£ cuá»‘i = <strong>Ká»· DÆ°</strong> â€” con sá»‘ then chá»‘t cho ThÃ¡i áº¤t.
        </p>
        <div id="viz-modular"></div>
    </section>

    <!-- â•â•â• Â§ 5: Tam CÆ¡ Multi-Rate â•â•â• -->
    <section id="sec-tamco" class="viz-section">
        <h2><span class="sec-num">â‘¤</span> Tam CÆ¡ â€” Há»‡ Äa Tá»‘c Äá»™ trÃªn â„¤â‚â‚‚</h2>
        <p class="sec-desc">
            Ba "Ä‘á»“ng há»“" â„¤â‚â‚‚ quay á»Ÿ tá»‘c Ä‘á»™ khÃ¡c nhau: QuÃ¢n CÆ¡ (30 nÄƒm/bÆ°á»›c),
            Tháº§n CÆ¡ (3), DÃ¢n CÆ¡ (1). Chá»“ng 3 nhá»‹p â†’ Ä‘Ã¡nh giÃ¡ tÃ¬nh tháº¿ quá»‘c gia.
        </p>
        <div id="viz-tamco"></div>
    </section>

    <!-- â•â•â• Â§ 6: Ká»³ MÃ´n 3-Layer â•â•â• -->
    <section id="sec-kimon" class="viz-section">
        <h2><span class="sec-num">â‘¥</span> Ká»³ MÃ´n Äá»™n GiÃ¡p â€” 3 Lá»›p + Ãnh Xáº¡ ToÃ n Ãnh</h2>
        <p class="sec-desc">
            Äá»‹a BÃ n cá»‘ Ä‘á»‹nh â†’ ThiÃªn BÃ n (Cá»­u Tinh) vÃ  NhÃ¢n BÃ n (BÃ¡t MÃ´n) xoay theo Phi Cung.
            Ãnh xáº¡ 12â†’9 (Chiâ†’Cung) vÃ  16â†’9 (Tháº§nâ†’Cung) lÃ  toÃ n Ã¡nh (surjective), cÃ³ cÃ¡c cáº·p chia sáº».
        </p>
        <div id="viz-kimon"></div>
    </section>

    <!-- â•â•â• Â§ 7: Constants Reference â•â•â• -->
    <section id="sec-constants" class="viz-section">
        <h2><span class="sec-num">â‘¦</span> Báº£ng Háº±ng Sá»‘ ToÃ¡n Há»c</h2>
        <p class="sec-desc">CÃ¡c háº±ng sá»‘ cá»‘t lÃµi xuáº¥t hiá»‡n trong mÃ£ nguá»“n ThÃ¡i áº¤t & Ká»³ MÃ´n.</p>
        <div id="viz-constants" class="const-grid"></div>
    </section>

</main>

<footer class="site-footer">
    ThÃ¡i áº¤t Tháº§n Sá»‘ Â· Ká»³ MÃ´n Äá»™n GiÃ¡p â€” PhÃ¢n TÃ­ch Cáº¥u TrÃºc ToÃ¡n Há»c
</footer>

<!-- â•â•â•â•â•â•â•â•â•â•â•â• Scripts â•â•â•â•â•â•â•â•â•â•â•â• -->
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="js/data.js"></script>
<script src="js/ha-do.js"></script>
<script src="js/lac-thu.js"></script>
<script src="js/cyclic.js"></script>
<script src="js/phi-cung.js"></script>
<script src="js/modular.js"></script>
<script src="js/tam-co.js"></script>
<script src="js/ki-mon-layers.js"></script>

<script>
// Boot all visualizations
document.addEventListener("DOMContentLoaded", () => {
    HaDoViz.init("#viz-hado");
    LacThuViz.init("#viz-lacthu");
    CyclicViz.init("#viz-cyclic");
    PhiCungViz.init("#viz-phicung");
    ModularViz.init("#viz-modular");
    TamCoViz.init("#viz-tamco");
    KiMonViz.init("#viz-kimon");

    // Constants cards
    buildConstants();
});

/** Switch Láº¡c ThÆ° between TQ / DV mode */
function setLacThuMode(mode) {
    if (LacThuMode.current !== mode) {
        LacThuMode.current = mode;
        LacThuViz.render();
    }
    // Update button active states
    document.getElementById("btn-lt-tq").classList.toggle("active", mode === "TQ");
    document.getElementById("btn-lt-dv").classList.toggle("active", mode === "DV");
    // Update hint text
    const cfg = mode === "TQ" ? LAC_THU_TQ : LAC_THU_DV;
    document.getElementById("lt-mode-hint").textContent = cfg.orientation;
}

function buildConstants() {
    const grid = document.querySelector("#viz-constants");
    const consts = [
        { name: "EPOCH", val: "10,153,917", desc: "ThÃ¡i áº¤t Epoch â€” nÄƒm gá»‘c quy Æ°á»›c" },
        { name: "Ká»¶ CHU Ká»²", val: "3,600", desc: "10 Ká»· Ã— 360 = 1 Äáº¡i Ká»·" },
        { name: "NGUYÃŠN CHU Ká»²", val: "360", desc: "5 NguyÃªn Ã— 72 = 1 Ká»·" },
        { name: "Há»˜I CHU Ká»²", val: "72", desc: "12 Há»™i Ã— 6 = khoáº£ng Ká»· DÆ°" },
        { name: "CAN CHI", val: "60", desc: "â„¤â‚â‚€ Ã— â„¤â‚â‚‚ â‰… â„¤â‚†â‚€ â€” Lá»¥c Tháº­p Hoa GiÃ¡p" },
        { name: "NGÅ¨ PHÃšC", val: "225", desc: "5 cung Ã— 45 nÄƒm/cung" },
        { name: "Äáº I DU", val: "288", desc: "8 cung Ã— 36 nÄƒm/cung" },
        { name: "VÄ‚N XÆ¯Æ NG", val: "18", desc: "16 vá»‹ + 2 dwell = 18 bÆ°á»›c hiá»‡u dá»¥ng" },
        { name: "MAGIC SUM", val: "15", desc: "Háº±ng sá»‘ ma phÆ°Æ¡ng Láº¡c ThÆ° 3Ã—3" },
        { name: "TAM CÆ  RATIO", val: "30 : 3 : 1", desc: "Tá»‰ lá»‡ tá»‘c QuÃ¢n : Tháº§n : DÃ¢n" },
    ];

    consts.forEach(c => {
        const card = document.createElement("div");
        card.className = "const-card";
        card.innerHTML = `
            <div class="const-name">${c.name}</div>
            <div class="const-val">${c.val}</div>
            <div class="const-desc">${c.desc}</div>
        `;
        grid.appendChild(card);
    });
}
</script>

</body>
</html>
